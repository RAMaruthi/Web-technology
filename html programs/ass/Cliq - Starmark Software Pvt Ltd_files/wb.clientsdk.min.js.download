function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var WBClient=function(){function n(e,t){_classCallCheck(this,n),this.initialized=!1,this.MSG_KEYS={INIT:"INIT",ACTIVE_USERS:"ACTIVE_USERS",EXPORT_BOARD_IMG:"EXPORT_BOARD_IMG",CLEAR_BOARD:"CLEAR_BOARD"},this.messagesSent={},this.domain="https://whiteboard.zoho.com",t&&t.length&&(this.domain=t),this.frameElement=e}return _createClass(n,[{key:"init",value:function(){if(!this.initialized)return this.initialized=!0,this._messageReceiver(),new Promise(function(t,e){document.addEventListener("WB_SDK_READY",function(e){t({WB_SDK_READY:"WB_SDK_READY",data:e.detail})})})}},{key:"_messageReceiver",value:function(){var s=this;window.onmessage=function(e){var t,n=e.data.msg;n&&(e=n.msgKey,n=n.msgData,e===s.MSG_KEYS.INIT?(t=new CustomEvent("WB_SDK_READY",{detail:n}),document.dispatchEvent(t)):(t=n.msgID,s.messagesSent[t].promiseObj(n.data)))}}},{key:"_messageSender",value:function(e,t,n){var s=Object.keys(this.messagesSent).length,s=s?s-1:0;t.msgID=s,this.messagesSent[s]={msgKey:e,data:t,promiseObj:n},this.frameElement.contentWindow.postMessage({msg:{msgKey:e,msgData:t}},this.domain)}},{key:"activeUsers",get:function(){var n=this;return new Promise(function(e,t){n._messageSender(n.MSG_KEYS.ACTIVE_USERS,{},e)})}},{key:"boardAsImage",get:function(){var n=this;return new Promise(function(e,t){n._messageSender(n.MSG_KEYS.EXPORT_BOARD_IMG,{},e)})}},{key:"clearBoard",get:function(){var n=this;return new Promise(function(e,t){n._messageSender(n.MSG_KEYS.CLEAR_BOARD,{},e)})}}]),n}();